/* backbone.viewmanager.min.js v0.0.3 */ 
(function(){var a,b,c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice;for(Backbone.ViewManager=function(b){function c(){var b=this;c.__super__.constructor.apply(this,arguments),this.on("all",function(){var a;return a=1<=arguments.length?k.call(arguments,0):[],b.broadcast.apply(b,a),b.emit.apply(b,a)}),null==this.children&&(this.children=new a(this.options.children||[]))}return j(c,b),c.prototype.emit=function(){var a,b,c,d,e,f,g,h,i,j;if(c=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],f=this.parent)if(/^(child:|request:)/.test(c)){if(b=a[0],null==b&&(b=new Base.Event({type:c,target:this})),!b.propagationStopped)return b.currentTarget=f,f.trigger.apply(f,arguments)}else if(!/^(app:|parent:|firstChild:|firstParent:)/.test(c)){for(d=uncapitalize(this.name),b=new Base.Event({name:c,target:this,currentTarget:f}),i=["child:"+c,"child:"+d+":"+c,"firstChild:"+c,"firstChild:"+d+":"+c],j=[],g=0,h=i.length;h>g;g++)e=i[g],j.push(f.trigger.apply(f,[e,b].concat(k.call(a))));return j}},c.prototype.broadcast=function(){var a,b,c,d,e,f,g,h,i,j,l,m,n,o,p;if(d=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],this.children)if(/^(parent:|app:)/.test(d)){if(c=a[0]||new Base.Event({type:d,target:this}),!c.propagationStopped)for(c.currentTarget=b,n=this.children,g=0,j=n.length;j>g;g++){if(b=n[g],c.propagationStopped)return;b.trigger.apply(b,arguments)}}else if(!/^(child:|request:|firstParent:|firstChild:)/.test(d))for(e=uncapitalize(this.name),c=new Base.Event({name:d,target:this}),o=this.children,h=0,l=o.length;l>h;h++)for(b=o[h],c.currentTarget=b,p=["parent:"+d,"parent:"+e+":"+d,"firstParent:"+d,"firstParent:"+e+":"+d],i=0,m=p.length;m>i;i++){if(f=p[i],c.propagationStopped)return;b.trigger.apply(b,[f,c].concat(k.call(a)))}},c.prototype.destroy=function(){return this.trigger("destroy"),this.cleanup&&this.cleanup(),this.$el.removeData("view"),this.$el.off(),this.off(),this.stopListening(),this.undelegateEvents(),this.remove(),this.parent?this.parent.children.splice(this.parent.children.indexOf(this),1):void 0},c.prototype.subView=function(){var a,b,c;if(a=1<=arguments.length?k.call(arguments,0):[],a[1])c=a[1],b=a[0];else{if("string"==typeof a[0])return this.childView(a[0]);c=a[0]}return c?(c instanceof Base.View||(c=new c),c.__viewName__=b,c.parent=this,this.children.push(c),c):(console.warn("No view passed to subView",a,arguments),void 0)},c.prototype.insertView=function(a,b){return b||(b=a,a=null),this.subView(b),a?this.$(a).append(b.$el):this.$el.append(b.$el),this},c.prototype.parentView=function(a,b){return this.parentViews(a,b)},c.prototype.findView=function(a){return this.findViews(a,!0)},c.prototype.childView=function(a){return this.childViews(a,!0)},c.prototype.destroyView=function(a,b){var c;return c=b?this.findView(a):this.childView(a),c&&c.destroy(),c},c.prototype.destroyViews=function(a,b){var c,d,e,f;for(d=b?this.findViews(a):this.childViews(a),e=0,f=d.length;f>e;e++)c=d[e],c.destroy();return d},c.prototype.childViews=function(a,b){return this.findViews(a,b,!0)},c.prototype.parentViews=function(a,b){var c,d;if(d=[],a){for(c=this;c=c.parent;)if(c.is&&c.is(a)){if(b)return c;d.push(c)}}else{if(b)return this.parent;d.push(this.parent)}return d},c.prototype.findViews=function(a,b,c){var d,e,f;return f=[],d=void 0,e=function(g){var h,i,j,k,l;for(k=g.children,l=[],i=0,j=k.length;j>i;i++){if(h=k[i],h.is(a)&&(f.push(h),b)){d=h;break}h&&!c?l.push(e(h)):l.push(void 0)}return l},e(this),b?d:f},c.prototype.is=function(a){var b,c,d,e,f,g;if(!a||a===this)return!0;switch(typeof a){case"string":return e=function(a){return a.toLowerCase().replace(/view$/i,"")},d=e(a),c=this.__viewName__,e(this.name||"")===d||e(c||"")===d;case"function":return!!a(this);default:for(b in a)if(g=a[b],f=this.get(b),null==f&&(f=this[b]),g!==f)return!1;return!0}},c}(Backbone.View),a=function(){function a(a,b){null==b&&(b={}),this.reset(a,b),b.noState||addState(this),_.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}return a.prototype.unshift=function(){var a,b,c,d,e,f;for(b=1<=arguments.length?k.call(arguments,0):[],e=b.reverse(),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.add(a,{at:0}));return f},a.prototype.push=function(){var a,b,c,d,e;for(b=1<=arguments.length?k.call(arguments,0):[],e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.add(a,{at:this.length}));return e},a.prototype.shift=function(){return this.remove(null,{at:0})},a.prototype.pop=function(){return this.remove(null,{at:this.length-1})},a.prototype.empty=function(){return this.splice(0,1/0)},a.prototype.eventNamespace="child:",a.prototype.bubbleEvents=!0,a.prototype.reset=function(a,b){return null==b&&(b={}),this.splice(this.length,this.length),this.push.apply(this,a),b.silent?void 0:this.trigger("reset",this,b)},a.prototype.add=function(a,b){var c,d=this;return null==b&&(b={}),c=null!=b.at?b.at:b.at=this.length,this.bubbleEvents&&a&&_.isFunction(a.on)&&this.listenTo(a,"all",function(){var a,b;return b=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],d.bubbleEvents?d.trigger.apply(d,[""+d.eventNamespace+d.eventName].concat(k.call(a))):void 0}),this.model&&(a=new this.model(a)),this.splice(c,null,a),b.silent?void 0:this.trigger("add",a,this,b)},a.prototype.remove=function(a,b){var c;return null==b&&(b={}),c=b.at||this.indexOf(a),null==a&&(a=this[c]),this.splice(c,1),b.silent||this.trigger("remove",a,this,b),this.stopChildrenening(a)},a}(),_.extend(a.prototype,Backbone.Events),g=["splice","indexOf","lastIndexOf","join","reverse","sort","valueOf","map","forEach","every","reduce","reduceRight","filter","some"],c=0,e=g.length;e>c;c++)b=g[c],a.prototype[b]||(a.prototype[b]=arr[b]);for(h=["each","contains","find","filter","reject","contains","max","min","sortBy","groupBy","sortedIndex","shuffle","toArray","size","first","last","initial","rest","without","isEmpty","chain","where","findWhere","clone","pluck","invoke"],d=0,f=h.length;f>d;d++)b=h[d],a.prototype[b]||(a.prototype[b]=_[b])}).call(this);